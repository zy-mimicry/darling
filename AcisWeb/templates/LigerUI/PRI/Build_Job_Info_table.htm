<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SKU Info</title>     
	<meta http-equiv="X-UA-Compatible" content="IE=8"/>
    <link href="../LigerUI/lib/ligerUI/skins/Aqua/css/ligerui-all.css" rel="stylesheet" type="text/css" />
    <link href="../LigerUI/lib/ligerUI/skins/Gray2014/css/all.css" rel="stylesheet" />
    <script src="../LigerUI/lib/jquery/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="../LigerUI/lib/ligerUI/js/ligerui.all.js"></script>
    <script src="../LigerUI/lib/jquery-validation/jquery.validate.min.js"></script>
    <script src="../LigerUI/lib/jquery-validation/jquery.metadata.js"></script>
    <script src="../LigerUI/lib/jquery-validation/messages_cn.js"></script>
    <script type="text/javascript">
        $(function ()
        {
           // $("#form1").ligerForm({
            //    validate: true
            //});
        });

 
    </script>
    <style type="text/css">
            body
            {
                padding-left:10px;
                font-size:13px;
            }
            h1
            {
                font-size:20px;
                font-family:Verdana;
            }
            h4
            {
                font-size:16px;
                margin-top:25px;
                margin-bottom:10px;
            }

            .description
            {
                padding-bottom:30px;
                font-family:Verdana;
            }
            .description h3
            {
                color:#CC0000;
                font-size:16px;
                margin:0 30px 10px 0px;
                padding:45px 0 8px;
                border-bottom:solid 1px #888;
            }
        td {
            padding: 5px;
        }
        input {
            word-wrap:normal;
            width:300px
        }
        select {
            word-wrap:normal;
            width:304px
        }
        textarea {
            word-wrap:normal;
            width:713px
        }

    </style>

</head>

<body style="padding:10px">
 
     <h1>Job Info</h1><font color=red>{{err|safe}}</font>
       

    <form id="form1" name="form1" method="post" action="/pri_db/?">
        <table>
                    {% csrf_token %}
                    <input id="op"  name="op" type="hidden" value='update'    />
                    <input id="tb"  name="tb" type="hidden" value='Build_Job_Info'    />
            <tr>
                <td><label >ID:</label></td>
                <td><input id="id" name="id" type="text"  value="{{id}}" /></td>
                <td><label>Operate</label></td>
                <td>
                  <select id="Operate" name="Operate" validate="{required:true}" >
                    <option value="start" >start</option>
                    <option value="stop" >stop</option>
                </select>
                </td>
            </tr>
            
            <tr>
                <td><label>JobName:</label></td>
                <td><input id="JobName" name="JobName" type="text" value="{{JobName}}" /></td>
                <td><label>RealName:</label></td>
                <td><input id="RealName" name="RealName" type="text" value="{{RealName}}" /></td>
            </tr>
            <tr>
                <td><label>Ticket Id:</label></td>
                <td><input id="Key" name="Key" type="text" value="{{Key}}" /></td>
                <td><label>UserName:</label></td>
                <td><input id="UserName" name="UserName" type="text" value="{{UserName}}" /></td>
            </tr>
            <tr>
                <td><label >Priority:</label></td>
                <td><input id="Priority" name="Priority" type="text"  value="{{Priority}}" /></td>
                <td><label>BuildDesc</label></td>
                <td><input id="BuildDesc" name="BuildDesc" type="text"  value="{{BuildDesc}}" /></td>
            </tr>
            <tr>
                <td><label >BuildResult:</label></td>
                <td>
                  <select id="BuildResult" name="BuildResult" validate="{required:true}" >
                    <option value="" >None</option>
                    <option value="FAILURE" >FAILURE</option>
                    <option value="SUCCESS">SUCCESS</option>
                </select>
                </td>
                <td><label>JobUrl</label></td>
                <td><input id="JobUrl" name="JobUrl" type="text"  value="{{JobUrl}}" /></td>
            </tr>
            <tr>
                <td><label >Building:</label></td>
                <td>
                  <select id="Building" name="Building" validate="{required:true}" >
                    <option value="" >None</option>
                    <option value="False" >False</option>
                    <option value="True">True</option>
                </select>
                </td>
                <td><label>JobState</label></td>
                <td>
                  <select id="JobState" name="JobState" validate="{required:true}" >
                    <option value="wait">wait</option>
                    <option value="doing" >doing</option>
                    <option value="handup" >handup</option>
                    <option value="done" >done</option>
                </select>
                </td>
            </tr>
            <tr>
                <td><label>QueueId:</label></td>
                <td><input id="QueueId" name="QueueId" type="text" value="{{QueueId}}" /></td>
                <td><label >BuildNum:</label></td>
                <td><input id="BuildNum" name="BuildNum" type="text" value="{{BuildNum}}" /></td>
            </tr>
            <tr>
                <td><label>Process_Id:</label></td>
                <td><input id="Process_Id" name="Process_Id" type="text" value="{{Process_Id}}" /></td>
                <td><label >BuildTime:</label></td>
                <td><input id="BuildTime" name="BuildTime" type="text" value="{{BuildTime}}" /></td>
            </tr>
            <tr>
                <td><label>Job_Type:</label></td>
                <td>
                  <select id="Job_Type" name="Job_Type" validate="{required:true}" >
                    <option value="jenkins" >jenkins</option>
                    <option value="python">python</option>
                    <option value="cmd">cmd</option>
                </select>
                </td>
                <td><label >Group:</label></td>
                <td>
                  <select id="Job_Group" name="Job_Group" validate="{required:true}" >
                    <option value="oempri" >oempri</option>
                    <option value="qti">qti</option>
                    <option value="fwtools">fwtools</option>
                    <option value="system">system</option>
                </select>
                </td>
            </tr>
            <tr>
                <td><label >Depender:</label></td>
                <td colspan=3><textarea id="Depender" name="Depender" class="ui_textarea" rows=1 >{{Depender}}</textarea></td>
            </tr>
            <tr>
                <td><label >Job_Para:</label></td>
                <td colspan=3><textarea id="Job_Para" name="Job_Para" class="ui_textarea" rows=2 >{{Job_Para}}</textarea></td>
            </tr>
            <tr>
                <td><label >Description:</label></td>
                <td colspan=3><textarea id="Description" name="Description" class="ui_textarea" rows=2 >{{Description}}</textarea></td>
            </tr>
            <tr>
                <td colspan=4 align="center"> 
                    <input value="update" type="submit" style="word-wrap:normal;width:80px;" />
                    <input value="restart" type="button" style="word-wrap:normal;width:80px;" onclick="ligerDialog_restart();" />
                    <input value="addnew" type="button" style="word-wrap:normal;width:80px;" onclick="ligerDialog_addnew();" />
                    <input value="markSucc" type="button" style="word-wrap:normal;width:80px;" onclick="ligerDialog_markSucc();" />
                    <input value="close" type="button" style="word-wrap:normal;width:80px;" onclick="ligerDialog_close();" />
                </td>
            </tr>
        </table>
    </form>
    <p>
    <!--textarea id="result_textarea" style="display:{{rltdisp}};width:837px" rows=15 >{{rlt}}</textarea-->
    </p>
     
 <script type="text/javascript">
   
     function ligerDialog_close()
     {
        parent.$.ligerDialog.close(); //关闭弹出窗; //关闭弹出窗
        parent.$(".l-dialog,.l-window-mask").css("display","none"); //只隐藏遮罩层
     }
     function ligerDialog_addnew()
     {
         $("#id").val("-1");
         $("#form1").submit();
     }
     function ligerDialog_markSucc()
     {
         $("#BuildResult").val("SUCCESS");
         $("#form1").submit();
     }
     function ligerDialog_restart()
     {
         $("#Building").val("");
         $("#JobState").val("wait");
         $("#form1").submit();
     }
    function getQueryString(name,def) { 
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i"); 
        var r = window.location.search.substr(1).match(reg); 
        if (r != null) return unescape(r[2]); 
        return def; 
    }     
    function getQueryStringex(str,key,i) { 
        if (!i) i=1;
        var reg = new RegExp(key, "i"); 
        var r = str.match(reg); 
        if (r != null) return unescape(r[i]); 
        return null; 
    }     
     
     //$("#CreatedDate").ligerDateEditor({ showTime: true, label: '', labelWidth: 100, labelAlign: 'left' });
     //$("#UpdateDate").ligerDateEditor({ label: '', labelWidth: 100, labelAlign: 'left', initValue: '{{UpdateDate}}'});
     //$("#CreatedDate").ligerGetDateEditorManager().setValue('{{CreatedDate}}');
     //$("#UpdateDate").ligerGetDateEditorManager().setValue('{{UpdateDate}}'.replace(' 100:00:00',''));
     $("#JobState").val("{{JobState}}");
     $("#Building").val("{{Building}}");
     $("#Job_Type").val("{{Job_Type}}");
     $("#Job_Group").val("{{Job_Group}}");
     $("#Operate").val("{{Operate}}");
     $("#BuildResult").val("{{BuildResult}}");
    if (getQueryStringex(window.location.search.substr(1),'close=(\\d+)',1)=='1') {ligerDialog_close();}
    </script>

</body>
</html>
